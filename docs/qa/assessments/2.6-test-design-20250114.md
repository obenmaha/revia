# Test Design: Story 2.6 - Détails d'une Session

Date: 2025-01-14
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 16
- Unit tests: 8 (50%)
- Integration tests: 6 (38%)
- E2E tests: 2 (12%)
- Priority distribution: P0: 6, P1: 6, P2: 4

## Test Scenarios by Acceptance Criteria

### AC1: Une page de détails de session est disponible avec Radix UI

#### Scenarios

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 2.6-UNIT-001 | Unit | P0 | Rendu de la page de détails | Composant UI |
| 2.6-UNIT-002 | Unit | P0 | Affichage des informations de base | Logique d'affichage |
| 2.6-INT-001 | Integration | P0 | Chargement des données | Intégration Supabase |
| 2.6-E2E-001 | E2E | P1 | Flux utilisateur de consultation | Parcours utilisateur complet |

### AC2: Tous les exercices de la session sont affichés avec drag & drop

#### Scenarios

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 2.6-UNIT-003 | Unit | P0 | Affichage des exercices | Composant UI |
| 2.6-UNIT-004 | Unit | P1 | Drag & drop des exercices | Fonctionnalité interactive |
| 2.6-INT-002 | Integration | P1 | Chargement des exercices | Intégration données/UI |

### AC3: Les notes et observations sont visibles avec formatage

#### Scenarios

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 2.6-UNIT-005 | Unit | P1 | Formatage des notes | Utilitaires de formatage |
| 2.6-INT-003 | Integration | P1 | Affichage des notes | Intégration données/UI |

### AC4: Les statistiques de la session sont calculées en temps réel

#### Scenarios

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 2.6-UNIT-006 | Unit | P0 | Calcul des statistiques | Algorithme de calcul |
| 2.6-INT-004 | Integration | P1 | Mise à jour des statistiques | Intégration calculs/UI |
| 2.6-E2E-002 | E2E | P2 | Affichage des statistiques | Validation visuelle |

### AC5: La navigation vers l'historique est possible avec breadcrumb

#### Scenarios

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 2.6-UNIT-007 | Unit | P1 | Rendu du breadcrumb | Composant UI |
| 2.6-INT-005 | Integration | P2 | Navigation breadcrumb | Intégration navigation |

### AC6: L'interface est claire et lisible avec animations

#### Scenarios

| ID | Level | Priority | Test | Justification |
|----|-------|----------|------|---------------|
| 2.6-UNIT-008 | Unit | P1 | Animations des composants | Composants UI |
| 2.6-INT-006 | Integration | P2 | Intégration des animations | Intégration UI/logique |

## Risk Coverage

### Performance Risks (PERF-001)

| Test ID | Risk Mitigated | Test Type |
|---------|----------------|-----------|
| 2.6-INT-001, 2.6-INT-002 | PERF-001 | Test de performance avec sessions complexes |

### Data Risks (DATA-001)

| Test ID | Risk Mitigated | Test Type |
|---------|----------------|-----------|
| 2.6-UNIT-006, 2.6-INT-004 | DATA-001 | Test de cohérence des statistiques |

### Business Risks (BUS-001)

| Test ID | Risk Mitigated | Test Type |
|---------|----------------|-----------|
| 2.6-INT-004, 2.6-E2E-002 | BUS-001 | Test de compréhension des statistiques |

## Recommended Execution Order

1. P0 Unit tests (fail fast)
   - 2.6-UNIT-001, 2.6-UNIT-002, 2.6-UNIT-003, 2.6-UNIT-006

2. P0 Integration tests
   - 2.6-INT-001

3. P0 E2E tests
   - 2.6-E2E-001

4. P1 tests in order
   - 2.6-UNIT-004, 2.6-UNIT-005, 2.6-UNIT-007, 2.6-UNIT-008, 2.6-INT-002, 2.6-INT-003, 2.6-INT-004

5. P2+ as time permits
   - 2.6-INT-005, 2.6-INT-006, 2.6-E2E-002

## Test Data Requirements

### Performance Test Data
- Sessions avec 50+ exercices
- Sessions avec calculs complexes
- Sessions avec données volumineuses
- Sessions avec statistiques variées

### UI Test Data
- Sessions avec notes longues
- Sessions avec exercices multiples
- Sessions avec caractères spéciaux
- Données de test multilingues

### Navigation Test Data
- Sessions avec breadcrumb complexe
- Sessions avec navigation multiple
- Sessions avec URLs partageables
- Données de test de navigation

## Test Environment Requirements

### Unit Tests
- Vitest avec mocks Supabase
- Données de test en mémoire
- Mocks des composants Radix UI

### Integration Tests
- Base de données de test Supabase
- Données réalistes
- Tests de performance

### E2E Tests
- Playwright avec données complètes
- Tests sur mobile et desktop
- Tests de navigation

## Quality Checklist

- [x] Every AC has test coverage
- [x] Test levels are appropriate (not over-testing)
- [x] No duplicate coverage across levels
- [x] Priorities align with business risk
- [x] Test IDs follow naming convention
- [x] Scenarios are atomic and independent
- [x] Performance tests cover complex sessions
- [x] UI tests cover user interactions
- [x] Navigation tests cover breadcrumb functionality
